- 【注：每一个线程在获取锁的时候可能都会排队等待，如果在等待时间上，先获取锁的线程的请求一定先被满足，那么这个锁就是公平的。反之，这个锁就是不公平的。公平的获取锁，也就是当前等待时间最长的线程先获取锁】



## 读写锁

~~~
读写锁在同一时刻可以允许多个读线程访问，但是在写线程访问时，所有的读线程和其他写线程均被阻塞。
读锁：允许其他线程获取读锁。
写锁：允许当前线程获取写锁。

锁降级：持有写锁 -> 获取读锁 -> 释放写锁 -> 释放读写
锁降级中读锁的获取是必要的。主要是为了保证数据的可见性，如果当前线程不获取读锁而是直接释放写锁，假设此刻另一个线程获取了写锁并修改了数据，那么当前线程无法感知线程T的数据更新。如果当前线程获取读锁，即遵循锁降级的步骤，则线程T将被阻塞，直到当前线程使用数据并释放读锁之后，线程T才能获取写锁进行数据更新。
~~~

|      | 当前线程读 | 当前线程写 | 其他线程读 | 其他线程写 |
| :--: | :--------: | :--------: | :--------: | :--------: |
|  读  |     √      |     X      |     √      |     X      |
|  写  |     √      |     √      |     X      |     X      |

